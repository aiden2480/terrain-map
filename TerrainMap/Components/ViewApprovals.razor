@if (approvals is not null)
{
    <MudExpansionPanels Outlined="false" Elevation="4">
        @if (approvals.Any())
        {
            @foreach (var approval in approvals)
            {
                @RenderApprovalPanel(approval)
            }
        }
        else
        {
            <MudExpansionPanel Text="There are no submissions" Disabled HideIcon />
        }
    </MudExpansionPanels>
}
else
{
    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Animation="Animation.Wave" Height="60px" Class="mb-1" />
    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Animation="Animation.Wave" Height="60px" Class="mb-1" />
    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Animation="Animation.Wave" Height="60px" Class="mb-1" />
}

@code {
    RenderFragment RenderApprovalPanel(Approval approval)
        => approval.Submission.Type switch
        {
            "award" => @<PendingAwardPanel Approval="@approval" />,
            "review" or "approval" => @<ApprovalPanel CurrentProfile="@CurrentProfile" Approval="@approval" IsReadOnly="@IsReadOnly" />,
            _ => throw new ArgumentException($"Unknown submission type {approval.Submission.Type}")
        };
}
